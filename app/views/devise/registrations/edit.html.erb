<div class="main-content">
  <!-- Header (v9) -->
  <section class="slice slice-xl bg-gradient-danger" style="padding-bottom: 150px; margin-top: -200px">
    <!-- SVG background -->
    <div class="bg-absolute-cover bg-size--contain d-flex align-items-center">
      <figure class="w-100">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="-1956 1143 1385 601" class="injected-svg svg-inject">
          <defs>
            <style>
              .cls-1 {
                fill: #fff;
                opacity: 0.046;
              }
            </style>
          </defs>
          <g id="Group_243" data-name="Group 243" transform="translate(-1838 1118)">
            <rect id="Rectangle_689" data-name="Rectangle 689" class="cls-1" width="89" height="75" transform="translate(54 476)"></rect>
            <rect id="Rectangle_690" data-name="Rectangle 690" class="cls-1" width="89" height="75" transform="translate(333 140)"></rect>
            <rect id="Rectangle_691" data-name="Rectangle 691" class="cls-1" width="89" height="75" transform="translate(479 200)"></rect>
            <rect id="Rectangle_692" data-name="Rectangle 692" class="cls-1" width="89" height="75" transform="translate(493 327)"></rect>
            <rect id="Rectangle_694" data-name="Rectangle 694" class="cls-1" width="89" height="75" transform="translate(280 364)"></rect>
            <rect id="Rectangle_695" data-name="Rectangle 695" class="cls-1" width="89" height="75" transform="translate(100 354)"></rect>
            <rect id="Rectangle_696" data-name="Rectangle 696" class="cls-1" width="89" height="75" transform="translate(493 41)"></rect>
            <rect id="Rectangle_697" data-name="Rectangle 697" class="cls-1" width="89" height="75" transform="translate(10 39)"></rect>
            <rect id="Rectangle_698" data-name="Rectangle 698" class="cls-1" width="89" height="75" transform="translate(325 25)"></rect>
            <rect id="Rectangle_699" data-name="Rectangle 699" class="cls-1" width="89" height="75" transform="translate(964 514)"></rect>
            <rect id="Rectangle_703" data-name="Rectangle 703" class="cls-1" width="89" height="75" transform="translate(659 539)"></rect>
            <rect id="Rectangle_705" data-name="Rectangle 705" class="cls-1" width="89" height="75" transform="translate(945 354)"></rect>
            <rect id="Rectangle_707" data-name="Rectangle 707" class="cls-1" width="89" height="75" transform="translate(855 39)"></rect>
            <rect id="Rectangle_700" data-name="Rectangle 700" class="cls-1" width="89" height="75" transform="translate(1178 140)"></rect>
            <rect id="Rectangle_704" data-name="Rectangle 704" class="cls-1" width="89" height="75" transform="translate(1125 364)"></rect>
            <rect id="Rectangle_708" data-name="Rectangle 708" class="cls-1" width="89" height="75" transform="translate(1170 25)"></rect>
            <rect id="Rectangle_709" data-name="Rectangle 709" class="cls-1" width="89" height="75" transform="translate(212 238)"></rect>
            <rect id="Rectangle_710" data-name="Rectangle 710" class="cls-1" width="89" height="75" transform="translate(123 154)"></rect>
            <rect id="Rectangle_713" data-name="Rectangle 713" class="cls-1" width="89" height="75" transform="translate(390 551)"></rect>
            <rect id="Rectangle_714" data-name="Rectangle 714" class="cls-1" width="89" height="75" transform="translate(884 178)"></rect>
            <rect id="Rectangle_715" data-name="Rectangle 715" class="cls-1" width="89" height="75" transform="translate(683 378)"></rect>
            <rect id="Rectangle_693" data-name="Rectangle 693" class="cls-1" width="89" height="75" transform="translate(-118 413)"></rect>
          </g>
        </svg>
      </figure>
    </div>

    <div class="container py-5 position-relative zindex-100">
      <div class="row row-grid justify-content-around align-items-center">
        <div class="container py-5">
          <div class="row justify-content-center">
            <div class="col">
              <div class="card shadow zindex-100">
                <div class="card-body px-md-5 py-3 mt-5">
                  <div class="text-center mx-auto mt-0 mb-3"">
                  <!-- FORM END -->
                  <h3 class=" mt-4">Mon profil</h3>
                  <p class="lead lh-180">Consultez les liens que vous avez minifiez ci-dessous !</p>
                  <%= link_to "Retour à la page d'accueil", "/", class: "btn btn-warning float-right hover-scale-110" %>
                  <table class="table table-dark mt-7">
                    <thead>
                    <tr>
                      <th>URL d'origine</th>
                      <th>User</th>
                      <th>Compteur</th>
                      <th>Date expiration</th>
                      <th>Ajouter des jours d'expiration</th>
                      <th>Expirer le lien</th>
                      <th>Shorten URL</th>
                      <th colspan="5"></th>
                    </tr>
                    </thead>
                    <tbody>
                    <% ShortenedUrl.where(owner_id: current_user.id).order(id: :desc).each do |url| %>
                      <tr>
                        <td><%= url.url %></td>
                        <td><%= url.owner_id %></td>
                        <td><%= url.use_count %></td>
                        <td><%= url.expires_at %></td>
                        <div class="btn-group btn-group-toggle" data-toggle="buttons">
                          <td>
                            <%= form_for(url, url: shortened_url_path(url),  method: :put ) do |f| %>
                              <%= f.number_field :nombre, class: 'form-control',:in => 1..30 %>
                              <%= f.hidden_field :id, value: url.id %>
                              <%= f.submit 'Ajouter', name: nil, class: "btn btn-success hover-scale-110 mt-4" %>
                            <% end %>
                          </td>
                          <td>
                            <%= form_for(url, url: shortened_url_path(url),  method: :put ) do |f| %>
                              <%= f.hidden_field :id, value: url.id %>
                              <%= f.hidden_field :expire_date, value: DateTime.now %>
                              <%= f.submit 'Expirer', name: nil, class: "btn btn-danger hover-scale-110 mt-4" %>
                            <% end %>
                          </td>
                        </div>
                        <td><%= "#{request.protocol}#{request.host_with_port}/#{url.unique_key}" %></td>
                        <td><%= link_to "Visitez le lien", "/" + url.unique_key, target: "_blank", class: "btn btn-primary  hover-translate-y-n3" %></td>

                      </tr>
                    <% end %>
                    </tbody>
                  </table>

                  <p class="lead lh-180">Modifiez mes informations de profil</p>

                <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
                  <%= render "devise/shared/error_messages", resource: resource %>

                  <div class="field">
                    <%= f.label :email, class: 'control-label' %><br />
                    <%= f.email_field :email, autofocus: true, autocomplete: "email", class: 'form-control' %>
                  </div>

                  <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
                    <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
                  <% end %>

                  <div class="field"><br>
                    <%= f.label :nouveau_mot_de_passe, class: 'control-label' %> <i>(à laisser vide pour ne pas modifier)</i><br />
                    <%= f.password_field :password, autocomplete: "new-password", placeholder: 'Nouveau mot de passe', class: 'form-control' %>
                    <% if @minimum_password_length %>
                      <br />
                      <em><%= @minimum_password_length %> caractères minimum</em>
                    <% end %>
                  </div>


                  <div class="field">
                    <%= f.label :confirmation_de_mot_de_passe, class: 'control-label' %><br />
                    <%= f.password_field :password_confirmation, autocomplete: "new-password", placeholder: 'Confirmer le mot de passe', class: 'form-control' %>
                  </div><br>

                  <div class="field">
                    <%= f.label :mot_de_passe_actuel, class: 'control-label' %> <i></i><br />
                    <%= f.password_field :current_password, autocomplete: "current-password", placeholder: '******', class: 'form-control' %>
                  </div><br>

                  <div class="actions">
                    <%= f.submit "Mettre à jour", class: 'btn btn-dark'%>
                  </div><br>
                <% end %>

                <h3>Supprimer mon compte</h3>
                <p>Huzza a été ravi de vous compter parmis ses utilisateurs... <%= button_to "Supprimer mon compte", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete, class: 'btn btn-danger'%></p>

                <%= link_to "Retourner en zone sûre", :back %>


              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>